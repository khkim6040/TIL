# 정규표현식을 공부하자

IDE에서 세부적인 검색, 쉘스크립트에서 유용하게 쓰일 것 같다.

## 핵심 개념
1. 문자 클래스(`[]`, `^`, `-`)로 패턴 지정
2. 수량자(`*`, `+`, `{n,m}`)로 반복 제어
3. 그룹(`()`, `|`, `\1`)으로 구조 제어
4. 경계(`^`, `$`, `\b`)로 문맥 제어
5. 실제 데이터 패턴(email, url, password)로 응용

## 용어 정리
- `\b`: 단어 경계(word boundary)
- `\w`: 단어 문자 (알파벳, 숫자, 언더스코어)
- `\d`: 숫자 (0-9)
- `\s`: 공백 문자 (스페이스, 탭, 개행 등)
- `^`: 문자 클래스 내(`[^...]`)에서는 부정, 밖에서는 줄 시작 앵커
- `(?:...)`: 비캡처 그룹 (그룹화만 하고 캡처 안 함)
- `(?!...)`: 부정 전방탐색 (뒤에 특정 패턴이 없어야 매칭)

---

## 기본 패턴 익히기
### 숫자 찾기
```regex
\d+
```
- `\d`: 숫자 한 개 (0-9)
- `+`: 1개 이상 반복
- 매칭 예시: abc123def → 123

### 단어 찾기
```regex
\w+
```
- `\w`: 단어 문자 (알파벳, 숫자, 언더스코어)
- `+`: 1개 이상 반복
- 매칭 예시: hello world_123 → hello, world_123

### 공백 제거
```regex
\s+
```
- `\s`: 공백 문자 (스페이스, 탭, 개행)
- `+`: 1개 이상 반복
- 매칭 예시: a   b\tc → 공백 부분들 모두 매칭

### 특정 문자로 시작
```regex
^Hello
```
- `^`: 문자열의 시작
- 매칭 예시: Hello World ✅, Say Hello ❌

### 특정 문자로 끝남
```regex
\.txt$
```

---

## 예제로 공부

### 1. 이메일 주소 검출 (간단 버전)

#### 조건
- 로컬 파트(@앞): 영문자, 숫자, 점(`.`), 하이픈(`-`), 언더스코어(`_`) 허용
- 도메인 파트(@뒤): 영문자, 숫자, 점(`.`), 하이픈(`-`) 허용
- 도메인은 최소 한 개의 점(`.`) 포함
- 최상위 도메인(TLD)은 최소 2글자 이상의 영문자

#### 예시
1. `khkim6040@gmail.com` ✅
2. `popo-admin@postech.ac.kr` ✅
3. `user.name@example.co` ✅
4. `invalid@.com` ❌ (도메인이 점으로 시작)
5. `test@domain` ❌ (점이 없음)
6. `-test@domain` ❌ (하이픈으로 시작)

#### 접근
`@`를 기준으로 앞뒤를 나눈다. 로컬 파트는 영문자/숫자로 시작하고, 점/하이픈/언더스코어가 중간에 올 수 있다.
도메인은 영문자/숫자와 하이픈으로 이루어진 부분들이 점으로 연결되고, 마지막은 영문자만으로 된 TLD다.
```regex
\b[a-zA-Z0-9]+[a-zA-Z0-9._-]*@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*\.[a-zA-Z]{2,}\b
```

---

### 2. 날짜 형식(YYYY-MM-DD) 검출

#### 조건
- 날짜는 항상 "4자리-2자리-2자리" 형태 (예: 2025-10-25)
- 구분자는 반드시 하이픈(`-`)
- 년은 1000-9999, 월은 01-12, 일은 01-31 범위
- 형식이 정확히 일치하는 부분만 매칭

#### 예시
1. `2025-10-25` ✅
2. `1999-12-31` ✅
3. `2025-2-01` ❌ (월에 0이 빠짐)
4. `log_2024-04-09.txt` → `2024-04-09` ✅
5. `date=2099-13-01` ❌ (13월 불가능)

#### 접근
하이픈 두 개로 3부분을 나눈다. 년은 1-9로 시작하는 4자리, 월은 01-09 또는 10-12, 일은 01-09 또는 10-29 또는 30-31로 나눠서 처리한다.
```regex
\b[1-9][0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|[12][0-9]|3[01])\b
```

---

### 3. JS 파일 경로 추출

#### 조건
- 경로 구분자는 `/`
- 파일명은 영문자, 숫자, `_`, `-` 포함 가능
- 확장자는 반드시 `.js`로 끝남
- `.json`, `.jsx`, `.js.map` 등은 제외

#### 예시
1. `/src/main.js` ✅
2. `/assets/scripts/app.min.js` ✅
3. `/components/button.jsx` ❌ (확장자 다름)
4. `helper.js.map` ❌ (`.js` 뒤에 `.map` 존재)
5. `scripts/utils/test.js` ✅

#### 접근
단어 경계(`\b`)로 파일명의 시작을 명확히 하고, 단어 문자(`\w`), 하이픈(`-`), 슬래시(`/`)를 허용한다.
`.js`로 끝나되, 뒤에 공백이 아닌 문자(`\S`)가 오면 안 되므로 부정 전방탐색 `(?!\S)`를 사용한다.
```regex
\b[\w/-]+\.js\b(?!\S)
```

---

### 4. HTML 태그 매칭

#### 조건
- `<`로 시작하고 `>`로 끝남
- 속성(attribute) 존재 가능 (`<a href="...">`)
- self-closing 태그 (`<br/>`, `<img ... />`) 포함
- 태그 전체(`<...>`)를 매칭

#### 예시
1. `<p>Hello world</p>` → `<p>`, `</p>` ✅
2. `<a href="https://example.com">link</a>` → `<a href="https://example.com">`, `</a>` ✅
3. `<br/>` → `<br/>` ✅
4. `<img src="test.jpg" alt="sample" />` → 전체 ✅
5. `text <div>inside</div> more text` → `<div>`, `</div>` ✅

#### 접근
`<`로 시작하고 가장 먼저 만나는 `>`까지 매칭한다.
`<`와 `>` 사이에 `>`가 없도록 부정 문자 클래스 `[^>]`를 사용한다.
```regex
<[^>]+>
```

---

### 5. 금액(숫자+단위) 검출

#### 조건
- 금액 단위는 "원" 또는 "₩"
- 쉼표 포함 숫자 허용 (`1,200`, `12,500,000`)
- 단위와 숫자 사이 공백 허용
- 1-9로 시작하는 숫자만 허용 (0으로 시작 불가)

#### 예시
1. `₩300` ✅
2. `12,500원` ✅
3. `5000원` ✅
4. `1,200,000 원` ✅
5. `원5000` ❌ (순서 반대)
6. `₩ 400` ✅

#### 접근
`₩`는 앞에, `원`은 뒤에 온다. 숫자는 1-9로 시작하고, 그 뒤에 숫자나 쉼표가 올 수 있다.
두 패턴을 `|`로 연결한다.
```regex
₩\s*[1-9][0-9,]*|[1-9][0-9,]*\s*원
```

---

## 추가 학습 자료
- [MDN 정규표현식 가이드](https://developer.mozilla.org/ko/docs/Web/JavaScript/Guide/Regular_Expressions)
- [Regex101](https://regex101.com/) - 정규표현식 테스트 도구
- [RegExr](https://regexr.com/) - 시각적 정규표현식 학습 도구