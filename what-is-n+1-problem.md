# N+1 문제란

*__추후 더 작성 예정__*

DB와 관련되어 있다. 쿼리를 이상하게 하면 정말 비효율적으로 결과가 나올 수 있다. 특히, 대규모 쿼리를 할 때 기하급수적으로 성능을 떨어뜨릴 수 있다.


방 조회 시 N+1 발생?

현재 방 조회 시에는 방 엔티티의 데이터만 보여준다. 따라서 연관된 다른 테이블의 값들이 필요없다. 방에 들어갔을 때에야 필요하다. 

그런데 방에 들어와 있는 유저의 데이터도 필요하다고 가정해보자. 그러면 모든 방 각각에 대해 들어가 있는 유저의 테이블 데이터가 필요하다. 방 테이블에 쿼리 한 번, 유저 테이블에 쿼리 한 번 두 번으로 가져올 수 있나? 문제는 원하는 방 하나와 그 방에 연결된 유저 데이터를 가져오기 위해 모든 방 데이터 조회(1번)와 방 개수만큼 연관된 유저 테이블 조회(N번)이 일어날 수 있다는 것이다. 이게 N+1 문제다.

왜?

해결 방법?